@model DashboardViewModel
@{
    ViewData["Title"] = "Ana Sayfa";
}

<!-- Stats Cards -->
<div class="row g-4 mb-4">
    <div class="col-md-6 col-xl-3">
        <div class="stats-card animate-fadeIn" style="animation-delay: 0.1s;">
            <div class="stats-card-icon blue">
                <i class="bi bi-book"></i>
            </div>
            <div class="stats-card-value">@Model.TotalBooks</div>
            <div class="stats-card-label">Toplam Kitap</div>
        </div>
    </div>
    <div class="col-md-6 col-xl-3">
        <div class="stats-card animate-fadeIn" style="animation-delay: 0.2s;">
            <div class="stats-card-icon green">
                <i class="bi bi-people"></i>
            </div>
            <div class="stats-card-value">@Model.TotalMembers</div>
            <div class="stats-card-label">Toplam Üye</div>
        </div>
    </div>
    <div class="col-md-6 col-xl-3">
        <div class="stats-card animate-fadeIn" style="animation-delay: 0.3s;">
            <div class="stats-card-icon orange">
                <i class="bi bi-arrow-left-right"></i>
            </div>
            <div class="stats-card-value">@Model.ActiveLoans</div>
            <div class="stats-card-label">Aktif Ödünç</div>
        </div>
    </div>
    <div class="col-md-6 col-xl-3">
        <div class="stats-card animate-fadeIn" style="animation-delay: 0.4s;">
            <div class="stats-card-icon red">
                <i class="bi bi-exclamation-triangle"></i>
            </div>
            <div class="stats-card-value">@Model.OverdueLoans</div>
            <div class="stats-card-label">Geciken Kitap</div>
        </div>
    </div>
</div>

<!-- Recent Loans Table -->
<div class="row">
    <div class="col-12">
        <div class="custom-table animate-fadeIn" style="animation-delay: 0.5s;">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5><i class="bi bi-clock-history me-2"></i>Son Ödünç İşlemleri</h5>
                <a href="@Url.Action("ActiveLoans", "Loans")" class="btn btn-gradient-primary btn-sm">
                    <i class="bi bi-arrow-right me-1"></i>Tümünü Gör
                </a>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th>Kitap</th>
                            <th>Üye</th>
                            <th>Ödünç Tarihi</th>
                            <th>İade Tarihi</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.RecentLoans.Any())
                        {
                            @foreach (var loan in Model.RecentLoans)
                            {
                                <tr>
                                    <td>
                                        <strong>@loan.BookTitle</strong>
                                    </td>
                                    <td>@loan.MemberName</td>
                                    <td>@loan.LoanedAt.ToString("dd.MM.yyyy")</td>
                                    <td>@loan.DueAt.ToString("dd.MM.yyyy")</td>
                                    <td>
                                        @if (loan.IsReturned)
                                        {
                                            <span class="badge-status available">
                                                <i class="bi bi-check-circle me-1"></i>İade Edildi
                                            </span>
                                        }
                                        else if (loan.IsOverdue)
                                        {
                                            <span class="badge-status overdue">
                                                <i class="bi bi-exclamation-circle me-1"></i>Gecikmiş
                                            </span>
                                        }
                                        else
                                        {
                                            <span class="badge-status loaned">
                                                <i class="bi bi-hourglass-split me-1"></i>Ödünçte
                                            </span>
                                        }
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="5" class="text-center py-4 text-muted">
                                    <i class="bi bi-inbox fs-1 d-block mb-2"></i>
                                    Henüz ödünç işlemi bulunmuyor
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row mt-4">
    <div class="col-md-4">
        <div class="stats-card text-center animate-fadeIn" style="animation-delay: 0.6s;">
            <a href="@Url.Action("Index", "Loans")" class="text-decoration-none">
                <div class="stats-card-icon blue mx-auto">
                    <i class="bi bi-plus-circle"></i>
                </div>
                <h5 class="mt-3 mb-2 text-dark">Yeni Ödünç Ver</h5>
                <p class="text-muted mb-0">Kitap ödünç verme işlemi başlat</p>
            </a>
        </div>
    </div>
    <div class="col-md-4">
        <div class="stats-card text-center animate-fadeIn" style="animation-delay: 0.7s;">
            <a href="@Url.Action("Create", "Books")" class="text-decoration-none">
                <div class="stats-card-icon green mx-auto">
                    <i class="bi bi-book"></i>
                </div>
                <h5 class="mt-3 mb-2 text-dark">Yeni Kitap Ekle</h5>
                <p class="text-muted mb-0">Kütüphaneye yeni kitap ekle</p>
            </a>
        </div>
    </div>
    <div class="col-md-4">
        <div class="stats-card text-center animate-fadeIn" style="animation-delay: 0.8s;">
            <a href="@Url.Action("Create", "Members")" class="text-decoration-none">
                <div class="stats-card-icon orange mx-auto">
                    <i class="bi bi-person-plus"></i>
                </div>
                <h5 class="mt-3 mb-2 text-dark">Yeni Üye Ekle</h5>
                <p class="text-muted mb-0">Kütüphaneye yeni üye kaydet</p>
            </a>
        </div>
    </div>
</div>
